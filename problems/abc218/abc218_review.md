# abc218

https://atcoder.jp/contests/abc218/submissions/me

## F
- 探索できるものを探す: NMくらいかー
    - N: 400
    - M: 2*10^5
    - NM: 8*10^7
- NMサイズのdp→無理だなあ
- bfs考える→経路は高々NなのでO(M(N+M))からO(N(N+M))にできる!
- 実は計算量減らせる道があるパターン

## G
- 木なので根から葉までの経路を決めるだけ→どの葉に行くか決めるだけ
- 木dp
    - 葉は根までに通る値の中央値
    - 子からの解がわかっていればその最大/最小をとる
- 中央値の管理
    - 前書いたCppLikeSetがバグってて時間食った
    - BITとにぶたんで管理

## H
- R=min(R, N-R)として良い
- Rが連続すると最適ではない(連続するR,BRBR...BR, 連続するB)みたいな部分が存在し、連続するRと連続するBを入れ替えると必ず得をする
- 2個連続でR箇所洗濯してその最大値を求める問題
- 今までとったのをまたいで2個とることを許せば、貪欲で良い
    - 証明: R=1はOK, R=iでOK→R=i+1でOkを示す
        - 貪欲で得たものをA, その他の最適がBとする。それらをXORしてみる。貪欲で新たにとったとこをx, yとする
            - x,yのbitが立ってない→(A^(x, y))より(B^(x, y))のが大きくなって矛盾
            - Aのなかでx, yのみbitが立ってる→貪欲に矛盾
            - その他も立ってる→A>Bを考えると矛盾
- 解説解が発想わかんない: 上に凸確認してg=f(x)-kxを導入、(arg)max_x{g(x, k)}が簡単に求められるのでargmax_xがRになるkをにぶたんすれば良い
    - 簡単に出せそうな言い換えを探す: 点灯に罰則をつけて最大値を求める問題(すなわちmax_x{g(x, k)})この時argmax_xも簡単にもとまる。ちょうどxがRになるようにkを見つけたらそれが解である。argmax_x{g}のkについての単調性が示せればにぶたんでいける。
    - にぶたんしたものは、「補助変数の値」
