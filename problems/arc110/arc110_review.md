# arc110

https://atcoder.jp/contests/arc110/submissions/me

## A

- pi(1, 2, ..., N)+1は(1,2..., N)それぞれで割った余りが1
- そのままやるとデカくなりすぎるので、約数のcntのmaxを保持してやる

## B

- 0, 1, 2　のいずれかからスタートして一致する(しなければ-1)
- 端っこが怖いだけ

## C

- iで操作をすると(1, ... i)と(i+1,...,N)間での数字のやりとりができなくなる
- (1): (P_1,...,P_i-1, P_i+1)が(1,...i)と一致している
- (1)が満たされない操作はしてはならない
- 順序によって(1)が変わりうるのはその前後が操作された時のみ
  - (1)が満たされている前後で操作してしまうとそこでの操作は以後不可能になる
  - 前後を操作しないなら順序は関係ない
- (1)を満たしているならば操作してしまって良い

- とくアルゴリズム
  - 左から見ていって(1)を満たしたところ(i)で操作する
  - そこまでで(1)を満たしうるのは(i-1)のみ
  - 再帰的にi-2, i-3, ...1を操作する
  - i+1から同じことをする
  - そろってなければダメ
- 条件の管理でつまずいた(segtreeでやればいいと最初気づかなかった)

- 1を持ってくるを繰り返すだけでよかった

## D

- 数式をゴロゴロ転がした(ダメだった)
- 意味的な部分から攻めた
  - 1. N+1個の箱がある、それぞれの箱から(A1, A2..., AN, 0)個取り出すことが決まっている
  - 2. 箱にM個配分する
  - これのありうる組み合わせをたし合わせれば良い(積が消せた！)
  - 計算方法
  - 1. 箱の位置、とる玉の位置を固定して、余った玉をそれぞれの間に入れていく
  - 2. 違うものは違うものになっている(何言っとり？)(とるものが違うか、箱への配分が違う)
  - 3. N+sum(A)個の板と、M-sum(A)個の玉の並べ方=comb(N+M, N+sum(A))

- できるだけ面倒は避ける
  - Bの組み合わせ、その状況下でのAの組み合わせ＝＞（A,B)の組み合わせを同時に

## E

- 不変量に注目する
- 操作手順ではなく、操作結果の数え上げなので、生成できるものの特徴を探す=>不変量
- 部分に区切って不変量との関係をみる
